/* HTML includes + active nav + root-safe links (GitHub Pages + CNAME). */
(function(){const e="/";function t(t){t.querySelectorAll("a[data-root]").forEach((t=>{const o=t.getAttribute("href")||"/";o.startsWith("http")||o.startsWith("/")||(t.href=e+o.replace(/^\.?\//,""))}))}function o(e){const t=location.pathname.replace(/\/+$/,"")||"/";e.querySelectorAll("nav a").forEach((e=>{const o=(e.getAttribute("href")||"").replace(/\/+$/,"")||"/";(o===t||"/"!==o&&t.startsWith(o))&&e.classList.add("active")}))}async function n(){const e=Array.from(document.querySelectorAll("[data-include]"));await Promise.all(e.map((async e=>{const t=e.getAttribute("data-include");if(!t)return;try{const o=await fetch(t,{cache:"no-cache"});if(!o.ok)throw 0;const n=await o.text();e.outerHTML=n}catch{console.warn("Include failed:",t)}})));t(document),o(document)}document.addEventListener("DOMContentLoaded",n)})();